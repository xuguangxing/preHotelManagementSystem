<!-- 头部 start-->
<!DOCTYPE html>
<html class="fly-html-layui fly-html-store">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta name="renderer" content="webkit">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <link rel="icon" href="image/favicon.ico">
    <meta name="keywords" content="酒店管理系统">
    <meta name="description" content="酒店管理系统">
    <link rel="stylesheet" href="/layuiadmin/layui/css/layui.css">
    <link rel="stylesheet" href="/layuiadmin/style/admin.css">
    <link rel="stylesheet" href="/css/global.css" charset="utf-8">
    <link rel="stylesheet" href="/css/global(1).css" charset="utf-8">
    <link rel="stylesheet" href="/css/store.css" charset="utf-8">
    <link rel="icon" href="image/favicon.ico">

</head>
<!-- 头部 end-->
<title>全部房间列表 - 酒店管理系统</title>
<body>
<!--顶部 start-->
<div class="layui-header header header-store" style="background-color: #083a6d;">
    <div class="layui-container">
        <a class="logo" href="/index/index">
            <img src="/image/logo.png" alt="layui">
        </a>
        <div class="layui-form component" lay-filter="LAY-site-header-component"></div>
        <ul class="layui-nav" id="layui-nav-userinfo">

        </ul>
    </div>
</div>
<!--顶部 end-->
<!--[if lt IE 9]>  <script src="https://cdn.staticfile.org/html5shiv/r29/html5.min.js"></script>  <script src="https://cdn.staticfile.org/respond.js/1.4.2/respond.min.js"></script><![endif]-->
<div class="shop-nav shopdata">
    <!--搜索 start-->
    <div id="LAY-topbar" style="height: auto;">
        <form class="layui-form layuimini-form">
            <div class="input-search">
                <div id="searchRoom">
                </div>
                <div class="layui-container layui-hide-xs"> <a href="http://www.xueden.cn/" class="topbar-logo"> <img src="/image/1.jpg" alt="layui"> </a> </div>
            </div>
        </form>
    </div>
    <!--搜索 end-->
</div>



<div class="shoplist-filter">
    <div class="layui-container">
        <div class="layui-card">
            <div class="layui-card-header"> <span class="layui-breadcrumb" style="visibility: visible;"> <a href="/index/index">酒店首页</a><span
                    lay-separator="">/</span> <a href="/lists/lists">类别</a><span lay-separator="">/</span> <a><cite>全部</cite></a>
						</span> </div>
            <div class="layui-card-body">
                <div class="store-cat-item"> <span><i class="layui-icon layui-icon-shop-fenlei"></i>类别：</span>
                    <ul id="getAllRoomType">
                        <!--<li  class="active"  > <a href="${base}/hotel/list/0/${floorId}/1/20.html">全部</a> </li>

                                <li > <a href="${base}/hotel/list/${r.id}/${floorId}/1/20.html">单人间</a> </li>
                                <li > <a href="${base}/hotel/list/${r.id}/${floorId}/1/20.html">双人间</a> </li>
                                <li > <a href="${base}/hotel/list/${r.id}/${floorId}/1/20.html">标准间</a> </li>-->

                    </ul>
                </div>
                <div class="store-cat-item colorFilt"> <span><i class="layui-icon layui-icon-shop-color"></i>楼层：</span>
                    <ul id="getAllFloor">

                        <!--<li style="background: #F2F2F2" title="全部"> <a href="../hotel/list/${roomTypeId}/0/1/20.html"> <img src="../hotel/images/all_bg.jpg">

                           <i class="layui-icon layui-icon-ok"></i>

                       </a>
                       </li>-->

                        <!--  <li title="1楼" class="bg1">
                                 <a href="${base}/hotel/list/${roomTypeId}/${r.id}/1/20.html">
                                  </a>
                          </li>

                          <li title="2楼" class="bg2">
                              <a href="${base}/hotel/list/${roomTypeId}/${r.id}/1/20.html">

                              </a>
                          </li>-->

                    </ul>
                </div>
                <p class="filtEnd">筛选出<span id="filtTotal">0</span>个</p>
            </div>
        </div>
    </div>
</div>
<div class="shop-temp shoplist">
    <div class="temp-normal">
        <div class="layui-container">
            <div class="layui-row layui-col-space20 shoplist" id="roomList">


                <!--<div class="layui-col-xs12 layui-col-sm6 layui-col-md4 layui-col-lg3">
                    <a class="template store-list-box" href="../hotel/details.html" target="_blank">
                        <img src="../hotel/images/f1-01.jpg" class="store-list-cover">
                        <h2 class="layui-elip">经济舒适单人房</h2>
                        <div> <label class="layui-badge-rim store-list-pay"> ￥99 </label>
                            <div class="store-list-colorbar">
                                <span class="store-color-bar" style="border-color: #009688;color: #009688;border-width: 1px;border-style: solid;background-color: #fff;    text-align: center;">空闲</span>
                                 <span class="store-color-bar" style="border-color: #5fb878;color: #5fb878;border-width: 1px;border-style: solid;background-color: #fff;    text-align: center;">单人间</span>
                                 <span class="store-color-bar" style="border-color: #01aaed;color: #01aaed;border-width: 1px;border-style: solid;background-color: #fff;    text-align: center;">1楼</span>
                            </div>
                        </div>
                    </a>
                </div>-->

            </div>
            <div style="margin: 50px 0 80px; text-align: center;"> </div>
        </div>
    </div>
</div>

<!-- 底部 start-->
<div class="fly-footer">
    <p>徐广兴 &nbsp;&nbsp;&nbsp;&nbsp;<i class="layui-icon layui-icon-login-qq"></i> 1832377033  &nbsp;&nbsp;&nbsp;&nbsp;
        <i class="layui-icon layui-icon-cellphone"></i>18317956639
    </p>
</div>

<!-- 底部 end-->
<script src="/static/layuiadmin/layui/layui.js"></script>
<script src="/static/js/project/index/index.js"></script>
<script>
    layui.config({
        version: "1545301148662"
    }).extend({
        'fly': '../hotel/layui/dist/lay/modules/fly/index'
    }).use(["form","element","fly"], function () {
        let form = layui.form,
            layer = layui.layer,
            element = layui.element,
            $ = layui.$;
        let loadIndex = layer.load(0, {
            shade: [0.3, '#333']
        });

        let roomTypeId = 0;
        let floorId = 0;
        //获取其他页传过来的房间类别Id
        let localDate = layui.sessionData('roomTypeData');
        if(typeof(localDate.roomTypeId)!="undefined"){
            roomTypeId = localDate.roomTypeId;
        }

        //获取其他页传过来的楼层Id
        let localFloorData = layui.sessionData('floorData');
        if(typeof(localFloorData.floorId)!="undefined"){
            floorId = localFloorData.floorId;
            console.info("楼层floorId:"+floorId);
        }

        //获取所有房间类别
        getAllRoomTypeList();
        function getAllRoomTypeList() {
            $.get({
                url: hotelRoomTypeListUrl,
                dataType: "json",
                timeout:300000,
                xhrFields:{withCredentials: true},
                success: function (res) {
                    let getAllRoomTypeHtml = '';
                    if(roomTypeId==0){
                        getAllRoomTypeHtml += '<li  class="active" data-id="0" > <a class="fly-case-active" href="JavaScript:void(0);" data-type="toRoomTypeListByLists">全部</a> </li>';
                    }else{
                        getAllRoomTypeHtml += '<li data-id="0" > <a class="fly-case-active" href="JavaScript:void(0);" data-type="toRoomTypeListByLists">全部</a> </li>';

                    }

                    if(res.success){
                        //遍历data
                        $.each(res.data, function (index, roomType) {
                            if(roomTypeId==roomType.id){
                                getAllRoomTypeHtml += '<li class="active"  data-id="'+roomType.id+'"> <a class="fly-case-active"  href="JavaScript:void(0);" data-type="toRoomTypeListByLists">' + roomType.typeName + '</a> </li>\n';
                            }else {
                                getAllRoomTypeHtml += '<li data-id="'+roomType.id+'"> <a class="fly-case-active"  href="JavaScript:void(0);" data-type="toRoomTypeListByLists">' + roomType.typeName + '</a> </li>\n';
                            }


                        });

                    }
                    $('#getAllRoomType').html(getAllRoomTypeHtml);
                    element.render();
                },
                error: function () {

                }
            });
        }

        //获取所有楼层
        getAllFloorList();
        function getAllFloorList() {
            $.get({
                url: getAllHotelFloorUrl,
                dataType: "json",
                timeout:300000,
                xhrFields:{withCredentials: true},
                success: function (res) {
                    let getAllFloorHtml = '';

                    getAllFloorHtml += '<li style="background: #F2F2F2" title="全部"> <a class="fly-case-active" href="JavaScript:void(0);" data-type="toFloorListByLists"> <img src="../hotel/images/all_bg.jpg">';
                    if(floorId==0) {
                        getAllFloorHtml += '<i class="layui-icon layui-icon-ok"></i>';
                    }
                    getAllFloorHtml += '</a>';
                    getAllFloorHtml += '</li>';

                    if(res.success){
                        //遍历data
                        $.each(res.data, function (index, floor) {

                            getAllFloorHtml += '<li data-id="'+floor.id+'" title="'+floor.floorName+'" class="bg'+(index+1)+'">\n';
                            getAllFloorHtml += '<a class="fly-case-active"  href="JavaScript:void(0);" data-type="toFloorListByLists">\n';
                            if(floorId==floor.id) {
                                getAllFloorHtml += '<i class="layui-icon layui-icon-ok"></i>';
                            }
                            getAllFloorHtml += '</a>\n';
                            getAllFloorHtml += '</li>\n';

                        });

                    }
                    $('#getAllFloor').html(getAllFloorHtml);
                    element.render();
                },
                error: function () {

                }
            });
        }


        getRoomListByType(roomTypeId,floorId);
        //根据房间类别Id或者楼层Id获取房间列表
        function getRoomListByType(roomTypeId,floorId) {
            $.get({
                url: hotelRoomListUrl,
                dataType: "json",
                data: {
                    roomTypeId:roomTypeId,
                    floorId:floorId
                },
                timeout:300000,
                xhrFields:{withCredentials: true},
                success: function (res) {
                    layer.close(loadIndex);
                    let getRoomListHtml = '';
                    if(res.success){
                        $("#filtTotal").html(res.data.total);
                        //遍历data
                        $.each(res.data.roomList, function (index, room) {
                            getRoomListHtml += '<div data-id="'+room.id+'"  class="layui-col-xs12 layui-col-sm6 layui-col-md4 layui-col-lg3">\n';
                            getRoomListHtml += '<a class="template store-list-box fly-case-active" href="JavaScript:void(0);" data-type="toRoomInfo">\n';
                            getRoomListHtml += '<img src="'+room.coverImg+'" class="store-list-cover">\n';
                            getRoomListHtml += '<h2 class="layui-elip">'+room.roomName+'</h2>\n';
                            getRoomListHtml += '<div> <label class="layui-badge-rim store-list-pay"> ￥'+room.memberPrice+' </label>\n';
                            getRoomListHtml += '<div class="store-list-colorbar">\n';
                            getRoomListHtml += '<span class="store-color-bar" style="border-color: #009688;color: #009688;border-width: 1px;border-style: solid;background-color: #fff;    text-align: center;">NO.'+room.roomNumber+'</span>\n';
                            getRoomListHtml += '<span class="store-color-bar" style="border-color: #5fb878;color: #5fb878;border-width: 1px;border-style: solid;background-color: #fff;    text-align: center;">'+room.roomType.typeName+'</span>\n';
                            getRoomListHtml += '<span class="store-color-bar" style="border-color: #01aaed;color: #01aaed;border-width: 1px;border-style: solid;background-color: #fff;    text-align: center;">'+room.hotelFloor.floorNo+'楼</span>\n';
                            getRoomListHtml += '</div>\n';
                            getRoomListHtml += '</div>\n';
                            getRoomListHtml += '</a>\n';
                            getRoomListHtml += '</div>\n';
                        });

                    }
                    $('#roomList').html(getRoomListHtml);
                    element.render();
                },
                error: function () {

                }
            });
        }


    });
</script>

<ul class="layui-fixbar">
    <li class="layui-icon layui-fixbar-top" lay-type="top" style="display: none;"></li>
</ul>
</body>
</html>
